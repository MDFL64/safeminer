<%- include('partial/header.html', {title: "Your Reports"}); %>

<%

function convertType(id) {
    
    switch (id) {
        case 1: return "Acids";
        case 2: return "Eye injury";
        case 3: return "Head injury";
        case 4: return "Slip and trips";
        case 5: return "Sharp edges";
        case 6: return "Rock slide";
        case 7: return "Heavy equipment";
        case 8: return "Suspended loads";
        case 9: return "Loud noises";
        case 10: return "Fall danger";
        case 11: return "L.O.T.O.";
        case 12: return "Welding";
        case 13: return "Electrocution";
        case 14: return "Toxic fumes";
        default: return "Other";
    }
}


%>

<!-- TODO: Add card so this looks less ugly -->
<div class="parallax-container">
    <!--<div class="parallax"><img class="responsive-img" src="https://static.pexels.com/photos/159306/construction-site-build-construction-work-159306.jpeg"></div>
    </div>-->
    
    <a class="waves-effect waves-light btn yellow darken-1" href="/api/submit"><i class="material-icons left">create</i><span class="grey-text text-darken-2">Create new Safety Report</span></a><br><br>
    <div class="section">
        <h3>Your safety reports</h3>
        <div class="divider"></div><br>
        <% for (let report of reports) { %>
            <div class="row">
                <div class="col s12 m6">
                <div class="card blue-grey darken-1">
                    <div class="card-content white-text">
                    <span class="card-title"><%= report.JobName %></span>
                    <p><b>Job info: </b><%= report.JobDescription %></p>
                    <br>
                    <ul style="margin:0;">
                    
                        <% for (let risk of report.Dangers) { %>
                            <li>
                                <span class="new badge red" data-badge-caption=""><b>Level </b><%= risk.Scale %></span>
                                <b>Type: </b><%= convertType(risk.Type) %><br>
                                <br>
                                <p><b>Response: </b><%= risk.Description %></p>
                            </li>
                        <% } %>
                        
                    </ul>
                    </div>
                    <!--<div class="card-action">
                    <a href="#">View Report</a>
                    <a href="#">Edit Report</a>
                    </div>-->
                </div>
                </div>
            </div>
        <% } %>
    </div>
</div>

<%- include('partial/footer.html', {}); %>
